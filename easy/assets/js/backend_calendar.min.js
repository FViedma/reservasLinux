window.BackendCalendar=window.BackendCalendar||{},function(e){"use strict";window.BackendCalendar.initialize=function(e){BackendCalendarGoogleSync.initialize(),BackendCalendarAppointmentsModal.initialize(),BackendCalendarUnavailabilityEventsModal.initialize(),"table"===e?BackendCalendarTableView.initialize():BackendCalendarDefaultView.initialize(),$("#calendar-page").on("click","#toggle-fullscreen",function(){var e=$(this),n=document.documentElement;document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),e.removeClass("btn-success").addClass("btn-light")):(n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen(),e.removeClass("btn-light").addClass("btn-success"))}),$("#insert-working-plan-exception").on("click",function(){var e=$("#select-filter-item").val(),n=GlobalVariables.availableProviders.find(function(n){return Number(n.id)===Number(e)});if(!n)throw new Error("Provider could not be found: "+e);WorkingPlanExceptionsModal.add().done(function(l,i){BackendCalendarApi.saveWorkingPlanException(l,i,e,function(){Backend.displayNotification(EALang.working_plan_exception_saved);var a=JSON.parse(n.settings.working_plan_exceptions)||{};for(var t in a[l]=i,GlobalVariables.availableProviders){var c=GlobalVariables.availableProviders[t];if(Number(c.id)===Number(e)){GlobalVariables.availableProviders[t].settings.working_plan_exceptions=JSON.stringify(a);break}}$("#select-filter-item").trigger("change")},null)})}),$("#appointment-select-municipality").on("change",function(){var e=$("#appointment-select-municipality").val();$("#appointment-select-medical-center").empty(),GlobalVariables.availableMedicalCenters.forEach(function(n){(n.codmunicip==e)>0&&$("#appointment-select-medical-center").append(new Option(n.nomestabl))})})}}();